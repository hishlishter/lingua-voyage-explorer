
# Инструкция по настройке базы данных в Supabase

## Шаги для создания таблиц

1. Войдите в панель управления Supabase (https://app.supabase.com)
2. Откройте свой проект
3. Перейдите в раздел "SQL Editor"
4. Нажмите "New Query"
5. Вставьте содержимое файла `database-setup.sql` в редактор
6. Нажмите "Run" для выполнения скрипта

## Проверка успешного создания таблиц

После выполнения скрипта перейдите в раздел "Table Editor", где вы должны увидеть все созданные таблицы:

1. profiles - информация о пользователях
2. tests - тесты для обучения
3. questions - вопросы для тестов
4. options - варианты ответов для вопросов
5. test_results - результаты прохождения тестов
6. courses - курсы для обучения
7. lessons - уроки внутри курсов
8. course_progress - прогресс пользователей по курсам
9. dictionary - словарь слов и фраз
10. word_sets - наборы слов для изучения
11. word_set_items - связь между наборами и словами
12. user_word_progress - прогресс пользователей по изучению слов

## Созданы следующие функциональные возможности:

1. Регистрация и аутентификация пользователей (используя встроенную auth систему Supabase)
2. Профили пользователей с отслеживанием прогресса
3. Система тестов со статистикой и отслеживанием результатов
4. Система курсов с уроками и отслеживанием прогресса
5. Словарь с возможностью создавать наборы слов и отслеживать прогресс изучения

## Настройка Row Level Security (RLS)

Скрипт уже включает настройку RLS для защиты данных:
- Пользователи могут видеть и редактировать только свои собственные данные
- Публичный доступ предоставлен только к общим ресурсам (тесты, курсы, словарь)

## Автоматическое обновление статистики

Реализованы триггеры для автоматического обновления статистики:
- Количество выполненных тестов в профиле пользователя
- Количество пройденных курсов в профиле пользователя
